(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{694:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/panel-recommendation",function(){return t(1334)}])},1334:function(e,n,t){"use strict";t.r(n);var a=t(5893),r=t(7294),l=t(7066),o=t(1819),s=t(4277),c=t.n(s);n.default=()=>{let[e,n]=(0,r.useState)(4.5),[t,s]=(0,r.useState)(600),[i,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(null),[p,x]=(0,r.useState)(null);return(0,r.useEffect)(()=>{l.Z.get("http://127.0.0.1:8090/weather?city=Bangkok").then(e=>{e.data.error||void 0===e.data.cloud_cover?(x("ไม่สามารถดึงข้อมูลสภาพอากาศได้"),u({solar_intensity:800,cloud_cover:50})):(u(e.data),x(null))}).catch(e=>{console.error("Error fetching weather:",e),x("เกิดข้อผิดพลาดในการเชื่อมต่อกับ API สภาพอากาศ"),u({solar_intensity:800,cloud_cover:50})})},[]),(0,a.jsxs)("div",{className:c().container,children:[(0,a.jsx)("h1",{children:"คำแนะนำการติดตั้งแผงโซลาร์เซลล์"}),(0,a.jsxs)("div",{className:c().inputSection,children:[(0,a.jsxs)("label",{children:["ค่าไฟต่อหน่วย (บาท/kWh):",(0,a.jsx)("input",{type:"number",value:e,onChange:e=>n(Number(e.target.value)),step:"0.1",min:"0"})]}),(0,a.jsxs)("label",{children:["ความต้องการพลังงาน (kWh/เดือน):",(0,a.jsx)("input",{type:"number",value:t,onChange:e=>s(Number(e.target.value)),step:"10",min:"0"})]}),(0,a.jsx)("button",{onClick:()=>{if(!i||void 0===i.cloud_cover){x("ไม่มีข้อมูลสภาพอากาศ");return}let n=Math.max(.1,1-i.cloud_cover/100),a=t/30,r=1800*n/1e3;if(r<=0){x("การคำนวณล้มเหลว: พลังงานต่อแผงเป็น 0");return}let l=Math.ceil(a/r),o=1e4*l,s=l*r*365,c=s*e;h({panels:l,totalCost:o,annualEnergy:s,annualSavings:c,paybackPeriod:c>0?o/c:1/0}),x(null)},children:"คำนวณ"})]}),d&&(0,a.jsxs)("div",{className:c().resultSection,children:[(0,a.jsx)("h2",{children:"ผลลัพธ์"}),(0,a.jsxs)("p",{children:["จำนวนแผงที่แนะนำ: ",(0,a.jsxs)("span",{className:c().resultValue,children:[d.panels," แผง"]})]}),(0,a.jsxs)("p",{children:["ต้นทุนโดยประมาณ: ",(0,a.jsxs)("span",{className:c().resultValue,children:[d.totalCost.toLocaleString()," บาท"]})]}),(0,a.jsxs)("p",{children:["พลังงานที่ผลิตได้ต่อปี: ",(0,a.jsxs)("span",{className:c().resultValue,children:[d.annualEnergy.toFixed(2)," kWh"]})]}),(0,a.jsxs)("p",{children:["เงินประหยัดต่อปี: ",(0,a.jsxs)("span",{className:c().resultValue,children:[d.annualSavings.toFixed(2)," บาท"]})]}),(0,a.jsxs)("p",{children:["ระยะเวลาคืนทุน: ",(0,a.jsxs)("span",{className:c().resultValue,children:[d.paybackPeriod.toFixed(1)," ปี"]})]}),(0,a.jsx)("button",{onClick:()=>{if(!d){x("ไม่มีข้อมูลคำแนะนำ");return}try{let n=new o.ZP;n.setFont("Arial"),n.setFontSize(16),n.text("Solar Panel Recommendation",20,20),n.setFontSize(12),n.text("Electricity Cost: ".concat(e.toFixed(2)," THB/kWh"),20,30),n.text("Energy Demand: ".concat(t," kWh/month"),20,40),n.text("Recommended Panels: ".concat(d.panels," panels"),20,50),n.text("Estimated Cost: ".concat(d.totalCost.toLocaleString()," THB"),20,60),n.text("Annual Energy Production: ".concat(d.annualEnergy.toFixed(2)," kWh"),20,70),n.text("Annual Savings: ".concat(d.annualSavings.toFixed(2)," THB"),20,80),n.text("Payback Period: ".concat(d.paybackPeriod.toFixed(1)," years"),20,90),n.save("solar_panel_recommendation.pdf"),x(null)}catch(e){console.error("Error generating PDF:",e),x("ไม่สามารถสร้าง PDF ได้")}},children:"Export เป็น PDF"})]})]})}},4277:function(e){e.exports={container:"panel-recommendation_container__e8zCu",h1:"panel-recommendation_h1___oNrc",error:"panel-recommendation_error__zXlpk",inputSection:"panel-recommendation_inputSection__zkFQW",resultSection:"panel-recommendation_resultSection__Pf9RM",resultValue:"panel-recommendation_resultValue__3xe1M"}}},function(e){e.O(0,[847,66,412,888,774,179],function(){return e(e.s=694)}),_N_E=e.O()}]);